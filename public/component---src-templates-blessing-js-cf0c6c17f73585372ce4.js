(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{0:function(t,e){},1:function(t,e){},"1TsT":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=!("undefined"==typeof window||!window.document||!window.document.createElement);var o=void 0;function r(){return void 0===o&&(o=function(){if(!i)return!1;if(!window.addEventListener||!window.removeEventListener||!Object.defineProperty)return!1;var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,e),window.removeEventListener("testPassiveEventSupport",n,e)}catch(o){}return t}()),o}function s(t){t.handlers===t.nextHandlers&&(t.nextHandlers=t.handlers.slice())}function a(t){this.target=t,this.events={}}a.prototype.getEventHandlers=function(t,e){var n,i=String(t)+" "+String((n=e)?!0===n?100:(n.capture<<0)+(n.passive<<1)+(n.once<<2):0);return this.events[i]||(this.events[i]={handlers:[],handleEvent:void 0},this.events[i].nextHandlers=this.events[i].handlers),this.events[i]},a.prototype.handleEvent=function(t,e,n){var i=this.getEventHandlers(t,e);i.handlers=i.nextHandlers,i.handlers.forEach((function(t){t&&t(n)}))},a.prototype.add=function(t,e,n){var i=this,o=this.getEventHandlers(t,n);s(o),0===o.nextHandlers.length&&(o.handleEvent=this.handleEvent.bind(this,t,n),this.target.addEventListener(t,o.handleEvent,n)),o.nextHandlers.push(e);var r=!0;return function(){if(r){r=!1,s(o);var a=o.nextHandlers.indexOf(e);o.nextHandlers.splice(a,1),0===o.nextHandlers.length&&(i.target&&i.target.removeEventListener(t,o.handleEvent,n),o.handleEvent=void 0)}}};function c(t,e,n,i){t.__consolidated_events_handlers__||(t.__consolidated_events_handlers__=new a(t));var o=function(t){if(t)return r()?t:!!t.capture}(i);return t.__consolidated_events_handlers__.add(e,n,o)}},FXPA:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return g})),n.d(e,"query",(function(){return m}));var i=n("AeFk"),o=n("dI71"),r=n("q1tI"),s=n.n(r),a=n("uuth"),c=n("Bl7J");var l={name:"xt1zlr",styles:"max-width:500px;margin-left:auto;margin-right:auto;padding-left:16px;padding-right:16px;padding-top:32px;padding-bottom:32px;@media screen and (min-width: 40em){width:500px;}"},u=n("IiLU"),p=n.n(u);var d={name:"o6x4ni",styles:"width:60vw;height:60vw;@media screen and (min-width: 40em){width:30vw;height:30vw;}"},h=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={drawingNum:-1,onPath:!1,gapPoints:10,currOffset:0,speed:4,direction:1,drawingData:e.drawingData},n.numPoints=500,n.paths={line:null,boundingCirc:null,drawings:[]},n}Object(o.a)(e,t);var n=e.prototype;return n.changeDrawing=function(t){this.setState({drawingNum:t.drawing}),this.setState({onPath:!1})},n.setupLinePathInCircle=function(t){var e=t.boundingCircSize;this.paths.line=new u.Path,this.paths.line.strokeColor="black";for(var n=0;n<this.numPoints;n++){var i=360/this.numPoints*n*(Math.PI/180),o=e*Math.cos(i),r=e*Math.sin(i);this.paths.line.add(new u.Point(p.a.view.center.x+o,p.a.view.center.y+r))}},n.drawScribble=function(t){var e=t.segment;this.setState({onPath:!1});var n=this.paths.line.segments[this.paths.line.segments.length-3],i=e.point.subtract(n.point),o=e.point.add(i);this.paths.boundingCirc.contains(o)?(Math.random()<.05&&this.setState({direction:-1*this.state.direction}),i.angle+=2*this.state.direction):i.angle+=40*this.state.direction,i=i.normalize().multiply(this.state.speed),e.point=e.point.add(i)},n.followPathOfShape=function(t){var e=t.segment,n=this.paths.drawings[this.state.drawingNum];if(this.state.onPath){this.setState({currOffset:(this.state.currOffset+n.length/(this.numPoints+this.state.gapPoints))%n.length});var i=n.getPointAt(this.state.currOffset);e.point=i}else{var o=n.getNearestPoint(e.point),r=o.subtract(e.point);r.length<=this.state.speed?(e.point=e.point.add(r),this.setState({onPath:!0}),this.setState({currOffset:n.getOffsetOf(o)})):(r=r.normalize().multiply(this.state.speed),e.point=e.point.add(r))}},n.updateLeadingPoint=function(t){var e=t.segment;this.state.drawingNum<0||this.state.drawingNum>=this.paths.drawings.length?this.drawScribble({segment:e}):this.followPathOfShape({segment:e})},n.componentDidMount=function(){var t=this;p.a.setup(this.canvas),p.a.tools.forEach((function(t){return t.remove()}));var e=this.canvas.offsetWidth/2-50;this.paths.boundingCirc=new u.Path.Circle(p.a.view.center,e);for(var n=0;n<this.state.drawingData.length;n++){var i=new u.Path(this.state.drawingData[n].path);i.fitBounds(this.paths.boundingCirc.bounds),this.paths.drawings.push(i)}this.numPoints=this.numPoints*(this.canvas.offsetWidth/400),this.setupLinePathInCircle({boundingCircSize:e}),p.a.view.onFrame=function(e){if(e.count%3==0)for(var n=0;n<t.numPoints;n++){var i=t.paths.line.segments[n];if(n===t.paths.line.segments.length-1)t.updateLeadingPoint({segment:i});else{var o=t.paths.line.segments[n+1];i.point=o.point}}}},n.render=function(){var t=this;return Object(i.b)("canvas",{css:d,resize:"true",ref:function(e){t.canvas=e}})},e}(s.a.Component);var f={name:"161ef4b",styles:"height:500px;position:sticky;top:calc(25vh - 30vw + 16px)"};function v(t){return Object(i.b)("div",null,t.stanza.map((function(t){return Object(i.b)("p",{key:t}," ",t," ")})))}var w={name:"1ykowef",styles:"margin-bottom:0"},g=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={pageData:e.data.pagesJson,blessing:e.data.blessingsJson,drawings:e.data.allDrawingsJson.nodes.sort((function(t,n){return e.data.pagesJson.drawings.indexOf(t.name)-e.data.pagesJson.drawings.indexOf(n.name)}))},n.drawingRef=s.a.createRef(),n}return Object(o.a)(e,t),e.prototype.render=function(){var t=this;return Object(i.b)(c.a,null,Object(i.b)("div",{css:Object(i.a)({display:"grid",gridGap:16,gridTemplateColumns:"repeat(1, 100%)","@media screen and (min-width: 40em)":{gridTemplateColumns:"60% 30%",marginLeft:150},gridTemplateRows:"repeat("+(this.state.blessing.stanzas.length+1)+", calc(100vh - 2.16rem))"},"","")},Object(i.b)("div",{css:[l,"grid-row:1;grid-column:1;justify-self:center;align-self:center;",""]},Object(i.b)(a.a,{onEnter:function(e){e.event;t.drawingRef.current.changeDrawing({drawing:-1})}}),Object(i.b)("h1",{css:w}," ",this.state.blessing.title," ")),Object(i.b)("div",{css:[f,"grid-row:1;grid-column:1;justify-self:center;@media screen and (min-width: 40em){grid-column:2;align-self:center;top:calc(2.16rem +  ((100vh - 2.16rem) / 2) - min(15vw + 32px, 250px));}",""]},Object(i.b)(h,{ref:this.drawingRef,drawingsOrder:this.state.pageData.drawings,drawingData:this.state.drawings})),this.state.blessing.stanzas.map((function(e,n){return Object(i.b)("div",{css:[l,{gridRow:n+2,alignSelf:"center"},"",""],key:e},Object(i.b)(a.a,{onEnter:function(e){e.event;t.drawingRef.current.changeDrawing({drawing:n})}}),Object(i.b)(v,{stanza:e}))}))))},e}(s.a.Component),m="2130157493"},uuth:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return m}));var i=n("1TsT"),o=n("q1tI"),r=n.n(o),s=n("TOwV");function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return u(this,n)}}function d(t,e){var n,i=(n=t,!isNaN(parseFloat(n))&&isFinite(n)?parseFloat(n):"px"===n.slice(-2)?parseFloat(n.slice(0,-2)):void 0);if("number"==typeof i)return i;var o=function(t){if("%"===t.slice(-1))return parseFloat(t.slice(0,-1))/100}(t);return"number"==typeof o?o*e:void 0}function h(t){return"string"==typeof t.type}var f;var v=[];function w(t){v.push(t),f||(f=setTimeout((function(){var t;for(f=null;t=v.shift();)t()}),0));var e=!0;return function(){if(e){e=!1;var n=v.indexOf(t);-1!==n&&(v.splice(n,1),!v.length&&f&&(clearTimeout(f),f=null))}}}var g={debug:!1,scrollableAncestor:void 0,children:void 0,topOffset:"0px",bottomOffset:"0px",horizontal:!1,onEnter:function(){},onLeave:function(){},onPositionChange:function(){},fireOnRapidScroll:!0},m=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(f,e);var n,o,c,u=p(f);function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=u.call(this,t)).refElement=function(t){e._ref=t},e}return n=f,(o=[{key:"componentDidMount",value:function(){var t=this;f.getWindow()&&(this.cancelOnNextTick=w((function(){t.cancelOnNextTick=null;var e=t.props,n=e.children;e.debug,function(t,e){if(t&&!h(t)&&!e)throw new Error("<Waypoint> needs a DOM element to compute boundaries. The child you passed is neither a DOM element (e.g. <div>) nor does it use the innerRef prop.\n\nSee https://goo.gl/LrBNgw for more info.")}(n,t._ref),t._handleScroll=t._handleScroll.bind(t),t.scrollableAncestor=t._findScrollableAncestor(),t.scrollEventListenerUnsubscribe=Object(i.a)(t.scrollableAncestor,"scroll",t._handleScroll,{passive:!0}),t.resizeEventListenerUnsubscribe=Object(i.a)(window,"resize",t._handleScroll,{passive:!0}),t._handleScroll(null)})))}},{key:"componentDidUpdate",value:function(){var t=this;f.getWindow()&&this.scrollableAncestor&&(this.cancelOnNextTick||(this.cancelOnNextTick=w((function(){t.cancelOnNextTick=null,t._handleScroll(null)}))))}},{key:"componentWillUnmount",value:function(){f.getWindow()&&(this.scrollEventListenerUnsubscribe&&this.scrollEventListenerUnsubscribe(),this.resizeEventListenerUnsubscribe&&this.resizeEventListenerUnsubscribe(),this.cancelOnNextTick&&this.cancelOnNextTick())}},{key:"_findScrollableAncestor",value:function(){var e=this.props,n=e.horizontal,i=e.scrollableAncestor;if(i)return function(e){return"window"===e?t.window:e}(i);for(var o=this._ref;o.parentNode;){if((o=o.parentNode)===document.body)return window;var r=window.getComputedStyle(o),s=(n?r.getPropertyValue("overflow-x"):r.getPropertyValue("overflow-y"))||r.getPropertyValue("overflow");if("auto"===s||"scroll"===s||"overlay"===s)return o}return window}},{key:"_handleScroll",value:function(t){if(this._ref){var e=this._getBounds(),n=function(t){return t.viewportBottom-t.viewportTop==0?"invisible":t.viewportTop<=t.waypointTop&&t.waypointTop<=t.viewportBottom||t.viewportTop<=t.waypointBottom&&t.waypointBottom<=t.viewportBottom||t.waypointTop<=t.viewportTop&&t.viewportBottom<=t.waypointBottom?"inside":t.viewportBottom<t.waypointTop?"below":t.waypointTop<t.viewportTop?"above":"invisible"}(e),i=this._previousPosition,o=this.props,r=(o.debug,o.onPositionChange),s=o.onEnter,a=o.onLeave,c=o.fireOnRapidScroll;if(this._previousPosition=n,i!==n){var l={currentPosition:n,previousPosition:i,event:t,waypointTop:e.waypointTop,waypointBottom:e.waypointBottom,viewportTop:e.viewportTop,viewportBottom:e.viewportBottom};r.call(this,l),"inside"===n?s.call(this,l):"inside"===i&&a.call(this,l),c&&("below"===i&&"above"===n||"above"===i&&"below"===n)&&(s.call(this,{currentPosition:"inside",previousPosition:i,event:t,waypointTop:e.waypointTop,waypointBottom:e.waypointBottom,viewportTop:e.viewportTop,viewportBottom:e.viewportBottom}),a.call(this,{currentPosition:n,previousPosition:"inside",event:t,waypointTop:e.waypointTop,waypointBottom:e.waypointBottom,viewportTop:e.viewportTop,viewportBottom:e.viewportBottom}))}}}},{key:"_getBounds",value:function(){var t,e,n=this.props,i=n.horizontal,o=(n.debug,this._ref.getBoundingClientRect()),r=o.left,s=o.top,a=o.right,c=o.bottom,l=i?r:s,u=i?a:c;this.scrollableAncestor===window?(t=i?window.innerWidth:window.innerHeight,e=0):(t=i?this.scrollableAncestor.offsetWidth:this.scrollableAncestor.offsetHeight,e=i?this.scrollableAncestor.getBoundingClientRect().left:this.scrollableAncestor.getBoundingClientRect().top);var p=this.props,h=p.bottomOffset;return{waypointTop:l,waypointBottom:u,viewportTop:e+d(p.topOffset,t),viewportBottom:e+t-d(h,t)}}},{key:"render",value:function(){var t=this,e=this.props.children;return e?h(e)||Object(s.isForwardRef)(e)?r.a.cloneElement(e,{ref:function(n){t.refElement(n),e.ref&&("function"==typeof e.ref?e.ref(n):e.ref.current=n)}}):r.a.cloneElement(e,{innerRef:this.refElement}):r.a.createElement("span",{ref:this.refElement,style:{fontSize:0}})}}])&&a(n.prototype,o),c&&a(n,c),f}(r.a.PureComponent);m.above="above",m.below="below",m.inside="inside",m.invisible="invisible",m.getWindow=function(){if("undefined"!=typeof window)return window},m.defaultProps=g,m.displayName="Waypoint"}).call(this,n("yLpj"))}}]);
//# sourceMappingURL=component---src-templates-blessing-js-cf0c6c17f73585372ce4.js.map